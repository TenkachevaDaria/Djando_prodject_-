{% extends "pattern.html" %}
{% load static %}
{% load basket_tags %}

{% block css %}
    <link rel="stylesheet" href="{% static "ccs/basket_page.css" %}">
{% endblock  %}

{% block content %}
    <div class="basket_container">
        <div>
            <h2 class="basket__title">Корзина</h2>
        <form class="basket__form">
            <input type="checkbox" id="select_all" name="select_all">
            <label for="select_all" class="select_all_label">Выбрать всё</label>
            <ul class="basket__item_list">
                {% user_basket request as baskets %}
                {% for basket_user in baskets %}
                    <li class="basket__item">
                        <input type="checkbox" id="{{ basket_user.id }}" name="basket_item">
                        <div class="item_box">

                            {% if basket_user.product.image %}
                                <div class="img_decor_card">
                                    <img src="{{ basket_user.product.image.url }}" alt="" class="item__img">
                                </div>
                            {% else %}
                                <img src="{% static 'deps/отсутсвует.png' %}" alt="" class="item__img">
                            {% endif %}

                            <div class="pos_box_price">
                                <h3 class="item__name">{{ basket_user.product.name }}</h3>
                                <p class="item__price">{{ basket_user.products_price }}</p>
                                <p class="item__sort_descr">{{ basket_user.product.description|truncatechars:35 }}</p>
                                <p class="item__platform">{{ basket_user.product.category }}</p>
                                <div class="item__counter_box">
                                    <span class="input_group_btn">
                                        <button type="button" class="counter_btn"
                                            data-cart-id="" data-cart-change-url="">-</button>
                                    </span>
                                    <input type="text" class="number" value="{{ basket_user.quantity }}"
                                        readonly>
                                    <span class="input-group-btn">
                                        <button type="button" class="counter_btn"
                                            data-cart-id="" data-cart-change-url="">+</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </li> 
                {% endfor %}
            </ul>
        </form>
        </div>
        <div class="right_basket_container">
            <div class="paymen_method_form">
                <div class="paymen_method_form__container">
                    <h3 class="paymen_method_form__title">Способ оплаты</h3>
                    <ul class="btn_choose_payment_list">
                        <li><button class="payment_way btn">Способ1</button></li>
                        <li><button class="payment_way btn">Способ2</button></li>
                    </ul>
                    <button class="payment_way payment_way__btn_chose btn ">Добавить способ оплаты</button>
                </div>
            </div>
            <p class="products_counter">Товары, {{ baskets.total_quantity }} шт.</p>
            <div class="total_price_container">
                <p class="total_price_name"><b>Итого</b></p>
                <p class="total_price_num"><b>{{ baskets.total_price }} &#8381;</b></p>
            </div>
            <button class="payment_way__btn btn">
                Купить
            </button>
        </div>
    </div>
{% endblock  %}